# PR-093: Confirm endpoint executes real actions (remove fixture responses + PR-005 references)

## Goal
Make `/v1/commands/confirm` execute the real action handlers when confirming a token generated by the command router’s `PendingActionManager` (Redis/in-memory), instead of returning “(Fixture response)” placeholder text.

## Context
In `src/handsfree/api.py`, `confirm_command()` checks `_pending_action_manager` first. When a token is confirmed, it returns a fixture response for:
- `pr.request_review`
- `pr.merge`
- `agent.delegate`

This is inconsistent with the later DB-backed confirmation path, which supports real execution (live mode when possible, otherwise fixture mode) with audit logging and idempotency semantics.

It also includes outdated text like “Real GitHub integration coming in PR-005.”

## Scope
- Refactor `/v1/commands/confirm` so that confirmations from `_pending_action_manager`:
  - map intent + entities to the existing `action_type` + payload shape
  - reuse the same execution logic as DB-backed pending actions (request review / rerun checks / merge / agent delegation) where available
  - preserve idempotency behavior (`idempotency_key`) and confirmation metrics
- Remove or update outdated PR-005 references in fixture strings and docs.
- Update `src/handsfree/commands/README.md` to remove stale “PR-005/PR-007” references and align “Future Work” with current repo state.

## Non-goals
- Changing the router’s policy decisions.
- Adding new side-effect types.

## Acceptance criteria
- Confirming a router-issued token for `pr.request_review` triggers the same behavior as the DB-backed `request_review` action (live if token available, otherwise fixture), and writes audit logs.
- Confirming a router-issued token for `pr.merge` uses the existing merge handler path (live if possible, otherwise fixture).
- Confirming a router-issued token for `agent.delegate` creates an `AgentTask` via the configured provider (or returns a clear error if no provider).
- No user-facing text mentions “Real GitHub integration coming in PR-005.”

## Suggested files
- `src/handsfree/api.py`
- `src/handsfree/commands/README.md`

## Validation
- Add or update tests covering confirm path for `_pending_action_manager` tokens.
- Run `python -m pytest -q`.
